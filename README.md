# psi-clumsyrobot
Radio PSI's favorite nonsense factory is back!

## Getting set up:
* clumsyrobot runs in Python 3 (and is incompatible with Python 2)
* clumsyrobot requires [discord.py](https://github.com/Rapptz/discord.py), a Discord API wrapper for Python 3.
    * You can use `pip install -U discord.py` to install it locally.
* clumsyrobot requires a `clumsyrobot.cfg` file to exist in the same directory as `clumsyrobot.py`.
    * It is in this file where you will specify API tokens and values determining clumsy's behavior (see below).

Once everything is properly set up, all you need to do is run the clumsyrobot script!
    * `python clumsyrobot.py`

## Configuration:
The following values are all configurable in `clumsyrobot.cfg`. Each value should be on its own line, with `=` separating each name and its configured value. (e.g., `RESPONSE_FREQUENCY = 0.05`)
* `DISCORD_API_TOKEN` (required)
    * The token the bot will use to authenticate with the Discord servers.
    * See [the developer portal on discord](https://discordapp.com/developers/applications/) for more information on bots/tokens.
* `MESSAGES_PER_AUTOSAVE` (optional; default = `25`)
    * The number of new messages clumsy will receive before backing up the markov data to disk.
    * Set this lower if you want to make sure as little is lost on a crash as possible.
    * Set this higher if you'd rather not write to disk all the time.
* `RESPONSE_FREQUENCY` (optional; default = `0.05`)
    * The probability that clumsyrobot will respond to any given message.
    * You probably don't want this set much higher than 0.05 (5%) -- what's endearing on occasion can get annoying with more frequency.
* `MARKOV_DATA_SAVE_LOCATION` (optional; default = `markov_data.pkl`)
    * The path to the file where the serialized markov data should be saved.
    * For extra credit, occasionally copy this file so there's a backup!

## Importing chat logs:
* I've included a simple script to convert raw chat lines from an existing chat log into a serialized markov data file (using pickle)
    * Change the path strings in the script to the right filenames and run it!
        * `python generate_markov_pkl.py`
    * NOTE: if the chat logs include usernames/timestamps, you will want to modify the script to parse those out first. (Due to differences between log files generated by various chat clients, this is not done automatically by the script as-is.)